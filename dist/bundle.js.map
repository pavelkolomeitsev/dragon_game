{"version":3,"sources":["webpack://dragon/./src/app.ts","webpack://dragon/./src/config.ts","webpack://dragon/./src/prefabs/boom.ts","webpack://dragon/./src/prefabs/bullet.ts","webpack://dragon/./src/prefabs/bullets.ts","webpack://dragon/./src/prefabs/dragon.ts","webpack://dragon/./src/prefabs/enemies.ts","webpack://dragon/./src/prefabs/enemy.ts","webpack://dragon/./src/prefabs/fire.ts","webpack://dragon/./src/prefabs/fires.ts","webpack://dragon/./src/prefabs/flyingObject.ts","webpack://dragon/./src/scenes/bootScene.ts","webpack://dragon/./src/scenes/gameScene.ts","webpack://dragon/./src/scenes/preloadScene.ts","webpack://dragon/./src/scenes/startScene.ts","webpack://dragon/./src/utils.ts","webpack://dragon/webpack/bootstrap"],"names":["gameConfig","type","Phaser","AUTO","physics","default","arcade","debug","width","BrowserResolution","WIDTH","height","HEIGHT","scene","BootScene","PreloadScene","StartScene","GameScene","position","textureType","x","y","init","boomAnimation","this","add","existing","frames","anims","generateFrameNames","prefix","start","end","create","key","frameRate","repeat","play","once","Animations","Events","ANIMATION_COMPLETE","destroy","generateBoom","enemy","Boom","GameObjects","Sprite","events","on","update","active","body","setAlive","generateBullet","helicopter","Bullet","move","setVelocityX","ENEMY_SPEED","reset","parentObject","FlyingObject","world","createBullet","bullet","getFirstDead","Physics","Arcade","Group","Bullets","flyingType","cursors","_cursors","dragonFlyAnimation","fires","Fires","setVelocityY","left","isDown","DRAGON_SPEED","right","down","up","space","fire","shift","console","log","createFire","Dragon","_createdEnemies","_killedEnemies","bullets","_timer","time","addEvent","delay","loop","callback","tick","callbackScope","createEnemies","Enemy","generateEnemy","onEnemyKilled","ENEMIES_AMOUNT","emit","remove","Enemies","_bullets","shoot","generateAttributes","Math","Between","setFrame","status","paused","generateFire","dragon","Fire","_nextShoot","now","enable","setVisible","setActive","preload","load","image","Scene","_score","input","keyboard","createCursorKeys","createBackground","_sounds","createSounds","_dragon","DragonStartPosition","FlyingType","_enemies","createCompleteEvents","addOverlap","showScore","onComplete","continue_game","score","user_wins","overlap","onOverlapFiresEnemies","undefined","onOverlapBulletsDragon","onOverlapDragonEnemies","_scoreText","setText","boom","_bg","tileSprite","setOrigin","theme","sound","volume","tilePositionX","text","fontFamily","fontSize","color","stroke","strokeThickness","sprite","LoadingBar","preloadAssets","atlas","audio","data","showPopup","createText","tapText","setInteractive","useHandCursor","showGameScene","graphics","fillStyle","fillRoundedRect","textTitle","textScore","0","1","2","3","4","style","boxColor","barColor","progressBox","Graphics","progressBar","showProgressBox","setEvents","showProgressBar","onLoadComplete","fillRect","value","clear","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","Game"],"mappings":"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","file":"bundle.js","sourcesContent":["import { gameConfig } from \"./config\";\r\n\r\nnew Phaser.Game(gameConfig);","import { StartScene } from \"./scenes/startScene\";\r\nimport { BootScene } from \"./scenes/bootScene\";\r\nimport { PreloadScene } from \"./scenes/preloadScene\";\r\nimport { GameScene } from \"./scenes/gameScene\";\r\nimport { BrowserResolution } from \"./utils\";\r\n\r\nexport const gameConfig: object = {\r\n    type: Phaser.AUTO,\r\n    physics: {\r\n        default: \"arcade\",\r\n        arcade: { debug: false}\r\n    },\r\n    width: BrowserResolution.WIDTH,\r\n    height: BrowserResolution.HEIGHT,\r\n    scene: [\r\n        // The order matters!\r\n        new BootScene(),\r\n        new PreloadScene(),\r\n        new StartScene(),\r\n        new GameScene()\r\n    ]\r\n};","import { StartPosition } from \"../utils\";\r\nimport { Enemy } from \"./enemy\";\r\n\r\nexport class Boom extends Phaser.GameObjects.Sprite {\r\n    constructor(scene: Phaser.Scene, position: StartPosition, textureType: string) {\r\n        super(scene, position.x, position.y, textureType);\r\n        this.scene = scene;\r\n        this.init();\r\n        this.boomAnimation();\r\n    }\r\n\r\n    protected init() {\r\n        this.scene.add.existing(this);\r\n    }\r\n\r\n    private boomAnimation(): void {\r\n        const frames: Phaser.Types.Animations.AnimationFrame[] = this.scene.anims.generateFrameNames(\"boom\", {\r\n            prefix: \"boom\",\r\n            start: 1,\r\n            end: 4\r\n        });\r\n        this.scene.anims.create({\r\n            key: \"boom-anim\",\r\n            frames: frames,\r\n            frameRate: 10,\r\n            repeat: 0, // to play animation only once\r\n        });\r\n        this.play(\"boom-anim\");\r\n        this.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => this.destroy());\r\n    }\r\n\r\n    public static generateBoom(scene: Phaser.Scene, enemy: Enemy): void {\r\n        const position: StartPosition = {\r\n            x: enemy.x,\r\n            y: enemy.y\r\n        };\r\n        new Boom(scene, position, \"boom\");\r\n    }\r\n}","import { FlyingObject } from \"./flyingObject\";\r\nimport { ENEMY_SPEED, StartPosition } from \"../utils\";\r\nimport { Enemy } from \"./enemy\";\r\n\r\nexport class Bullet extends FlyingObject {\r\n    constructor(scene: Phaser.Scene, position: StartPosition) {\r\n        super(scene, position, \"bullet\");\r\n        this.scene = scene;\r\n        this.init();\r\n    }\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.scene.events.on(\"update\", this.update, this);\r\n    }\r\n\r\n    public update(): void {\r\n        if (this.active && this.body.x < -150) this.setAlive(false);\r\n    }\r\n\r\n    public static generateBullet(scene: Phaser.Scene, helicopter: Enemy): Bullet {\r\n        const position: StartPosition = {\r\n            x: helicopter.x - 45,\r\n            y: helicopter.y + 10\r\n        };\r\n        return new Bullet(scene, position);\r\n    }\r\n\r\n    public move(): void {\r\n        this.body.setVelocityX(-ENEMY_SPEED * 2);\r\n    }\r\n\r\n    public reset(parentObject: Enemy): void {\r\n        this.x = parentObject.x - 45;\r\n        this.y = parentObject.y + 10;\r\n        this.setAlive(true);\r\n    }\r\n}","import { Enemy } from \"./enemy\";\r\nimport { Bullet } from \"./bullet\";\r\n\r\nexport class Bullets extends Phaser.Physics.Arcade.Group {\r\n    constructor(world: Phaser.Physics.Arcade.World, scene: Phaser.Scene) {\r\n        super(world, scene);\r\n        this.scene = scene;\r\n    }\r\n\r\n    public createBullet(helicopter: Enemy): void {\r\n        let bullet: Bullet = this.getFirstDead();\r\n        \r\n        if (!bullet) {\r\n            bullet = Bullet.generateBullet(this.scene, helicopter);\r\n            this.add(bullet);\r\n        } else {\r\n            bullet.reset(helicopter);\r\n        }\r\n\r\n        bullet.move();\r\n    }\r\n}","import { FlyingObject } from \"./flyingObject\";\r\nimport { Fires } from \"./fires\";\r\nimport { StartPosition } from \"../utils\";\r\nimport { BrowserResolution } from \"../utils\";\r\nimport { DRAGON_SPEED } from \"../utils\";\r\n\r\nexport class Dragon extends FlyingObject {\r\n    private _cursors: Phaser.Types.Input.Keyboard.CursorKeys | undefined;\r\n    public fires: Fires;\r\n\r\n    constructor(scene: Phaser.Scene, position: StartPosition, flyingType: string, cursors?: Phaser.Types.Input.Keyboard.CursorKeys) {\r\n        super(scene, position, \"dragon\", flyingType); // \"dragon\" - texture`s name\r\n        this.scene = scene;\r\n        this._cursors = cursors;\r\n        this.init();\r\n        this.dragonFlyAnimation();\r\n    }\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.fires = new Fires(this.scene.physics.world, this.scene);\r\n    }\r\n\r\n    public move() {\r\n        // to stop dragon when button is overout\r\n        this.body.setVelocityX(0);\r\n        this.body.setVelocityY(0);\r\n\r\n        if (this._cursors?.left.isDown) {\r\n            if (this.body.x < 0) return;\r\n            this.body.setVelocityX(-DRAGON_SPEED);\r\n        } else if (this._cursors?.right.isDown) {\r\n            if (this.body.x > BrowserResolution.WIDTH - 160) return;\r\n            this.body.setVelocityX(DRAGON_SPEED);\r\n        }\r\n\r\n        if (this._cursors?.down.isDown) {\r\n            if (this.body.y > BrowserResolution.HEIGHT - 120) return;\r\n            this.body.setVelocityY(DRAGON_SPEED);\r\n        } else if (this._cursors?.up.isDown) {\r\n            if (this.body.y < 0) return;\r\n            this.body.setVelocityY(-DRAGON_SPEED);\r\n        }\r\n\r\n        if (this._cursors?.space.isDown) {\r\n            this.fire();\r\n        }\r\n        if (this._cursors?.shift.isDown) {\r\n            console.log(\"Shift key is pressed!\");\r\n        }\r\n    }\r\n\r\n    private fire(): void {\r\n        this.fires?.createFire(this);\r\n    }\r\n\r\n    private dragonFlyAnimation(): void {\r\n        // 1. this line generate a list of textures. \"dragon\" (key) has to be the same as a texture`s name\r\n        const frames: Phaser.Types.Animations.AnimationFrame[] = this.scene.anims.generateFrameNames(\"dragon\", {\r\n            prefix: \"dragon\", // it means \"dragon1\", \"dragon2\" etc...\r\n            start: 1,\r\n            end: 6\r\n        });\r\n        // 2. create an animation on the scene with a list of frames\r\n        this.scene.anims.create({\r\n            key: \"fly\", // to identify this animation\r\n            frames: frames, // a list of textures\r\n            frameRate: 10, // a number of frames per second\r\n            repeat: -1, // a number of times of animations, -1 means infinitly\r\n        });\r\n        // 3. run animation\r\n        this.play(\"fly\"); // define by the key\r\n    }\r\n}","import { Enemy } from \"../prefabs/enemy\";\r\nimport { ENEMIES_AMOUNT } from \"../utils\";\r\nimport { Bullets } from \"./bullets\";\r\n\r\nexport class Enemies extends Phaser.Physics.Arcade.Group {\r\n    private _timer: Phaser.Time.TimerEvent | null;\r\n    private _createdEnemies: number = 0;\r\n    private _killedEnemies: number = 0;\r\n    public bullets: Bullets;\r\n\r\n    constructor(world: Phaser.Physics.Arcade.World, scene: Phaser.Scene) {\r\n        super(world, scene);\r\n        this.scene = scene;\r\n        this.bullets = new Bullets(this.scene.physics.world, this.scene);\r\n        this._timer = this.scene.time.addEvent({\r\n            delay: 1000,\r\n            loop: true,\r\n            callback: this.tick,\r\n            callbackScope: this\r\n        });\r\n    }\r\n\r\n    private createEnemies(): void {\r\n        let enemy: Enemy = this.getFirstDead();\r\n\r\n        if (!enemy) {\r\n            enemy = Enemy.generateEnemy(this.scene, this.bullets);\r\n            enemy.on(\"object_killed\", this.onEnemyKilled, this);\r\n            this.add(enemy);\r\n        } else {\r\n            enemy.reset();\r\n        }\r\n        \r\n        enemy.move();\r\n        ++this._createdEnemies;\r\n    }\r\n\r\n    private onEnemyKilled(): void {\r\n        ++this._killedEnemies;\r\n        if (this._killedEnemies >= ENEMIES_AMOUNT) this.scene.events.emit(\"enemies_killed\");\r\n    }\r\n\r\n    private tick(): void {\r\n        this._createdEnemies < ENEMIES_AMOUNT ? this.createEnemies() : this._timer?.remove();\r\n    }\r\n}","import { FlyingObject } from \"./flyingObject\";\r\nimport { StartPosition } from \"../utils\";\r\nimport { ENEMY_SPEED } from \"../utils\";\r\nimport { BrowserResolution } from \"../utils\";\r\nimport { Bullets } from \"./bullets\";\r\n\r\nexport class Enemy extends FlyingObject {\r\n    private _timer: Phaser.Time.TimerEvent | null;\r\n    private _bullets: Bullets | undefined;\r\n\r\n    constructor(scene: Phaser.Scene, position: StartPosition, flyingType: string, bullets: Bullets) {\r\n        super(scene, position, \"enemy\", flyingType);\r\n        this.scene = scene;\r\n        this._bullets = bullets;\r\n        this.init();\r\n        this._timer = this.scene.time.addEvent({\r\n            delay: 2000,\r\n            loop: true,\r\n            callback: this.shoot,\r\n            callbackScope: this\r\n        });\r\n    }\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.scene.events.on(\"update\", this.update, this);\r\n    }\r\n\r\n    private static generateAttributes() {\r\n        const position: StartPosition = {\r\n            x: BrowserResolution.WIDTH + 100,\r\n            y: Phaser.Math.Between(60, 680) \r\n        };\r\n        const helicopterType: string = `enemy${Phaser.Math.Between(1, 4)}`;\r\n\r\n        return { position: position, type: helicopterType };\r\n    }\r\n\r\n    public static generateEnemy(scene: Phaser.Scene, bullets: Bullets): Enemy {\r\n        const { position, type } = Enemy.generateAttributes();\r\n        return new Enemy(scene, position, type, bullets);\r\n    }\r\n\r\n    public move() {\r\n        this.body.setVelocityX(-ENEMY_SPEED);\r\n    }\r\n\r\n    public update() {\r\n        // this.active means object is active or not\r\n        if (this.active && this.body.x < -150) this.setAlive(false);\r\n    }\r\n    public reset(): void {\r\n        const { position, type } = Enemy.generateAttributes();\r\n\r\n        this.x = position.x;\r\n        this.y = position.y;\r\n        this.setFrame(type);\r\n        \r\n        this.setAlive(true);\r\n    }\r\n\r\n    private shoot(): void {\r\n        this._bullets?.createBullet(this);\r\n    }\r\n\r\n    public setAlive(status: boolean): void {\r\n        super.setAlive(status);\r\n        if (this._timer) this._timer.paused = !status;\r\n    }\r\n}","import { FlyingObject } from \"./flyingObject\";\r\nimport { Dragon } from \"./dragon\";\r\nimport { ENEMY_SPEED, BrowserResolution, StartPosition } from \"../utils\";\r\n\r\nexport class Fire extends FlyingObject {\r\n    constructor(scene: Phaser.Scene, position: StartPosition) {\r\n        super(scene, position, \"fire\");\r\n        this.scene = scene;\r\n        this.init();\r\n    }\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.scene.events.on(\"update\", this.update, this);\r\n    }\r\n\r\n    public update(): void {\r\n        if (this.active && (this.body.x < -150 || this.body.x > BrowserResolution.WIDTH + 100)) this.setAlive(false);\r\n    }\r\n\r\n    public static generateFire(scene: Phaser.Scene, dragon: Dragon): Fire {\r\n        const position: StartPosition = {\r\n            x: dragon.x + 75,\r\n            y: dragon.y + 15\r\n        };\r\n        return new Fire(scene, position);\r\n    }\r\n\r\n    public move(): void {\r\n        this.body.setVelocityX(ENEMY_SPEED * 2);\r\n    }\r\n\r\n    public reset(parentObject: Dragon): void {\r\n        this.x = parentObject.x + 75;\r\n        this.y = parentObject.y + 15;\r\n        this.setAlive(true);\r\n    }\r\n}","import { Dragon } from \"./dragon\";\r\nimport { Fire } from \"./fire\";\r\n\r\nexport class Fires extends Phaser.Physics.Arcade.Group {\r\n    private _nextShoot: number = 0;\r\n\r\n    constructor(world: Phaser.Physics.Arcade.World, scene: Phaser.Scene) {\r\n        super(world, scene);\r\n        this.scene = scene;\r\n    }\r\n\r\n    public createFire(dragon: Dragon): void {\r\n        if (this._nextShoot > this.scene.time.now) return; // to prevent toans of fires\r\n\r\n        let fire: Fire = this.getFirstDead();\r\n        \r\n        if (!fire) {\r\n            fire = Fire.generateFire(this.scene, dragon);\r\n            this.add(fire);\r\n        } else {\r\n            fire.reset(dragon);\r\n        }\r\n\r\n        fire.move();\r\n\r\n        this._nextShoot = this.scene.time.now + 500; // instead one fire per 0.5 second\r\n    }\r\n}","import { StartPosition } from \"../utils\";\r\n\r\nexport class FlyingObject extends Phaser.GameObjects.Sprite {\r\n    constructor(scene: Phaser.Scene, position: StartPosition, textureType: string, flyingType?: string, ) {\r\n        super(scene, position.x, position.y, textureType, flyingType);\r\n        this.scene = scene;\r\n        this.init();\r\n    }\r\n\r\n    protected init() {\r\n        this.scene.add.existing(this); // add sprite to the scene\r\n        this.scene.physics.add.existing(this); // add sprite as physic object to Phaser engine\r\n        this.body.enable = true; // the physic body of \"dragon\" will be available for physic impacts\r\n    }\r\n\r\n    public setAlive(status: boolean): void {\r\n        this.body.enable = status;\r\n        this.setVisible(status);\r\n        this.setActive(status);\r\n\r\n        if (!status) this.emit(\"object_killed\");\r\n    }\r\n}","export class BootScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({key: \"boot-scene\"});\r\n    }\r\n\r\n    protected preload(): void {\r\n        this.load.image(\"bg\", \"assets/images/background.png\");\r\n    }\r\n\r\n    protected create(): void {\r\n        this.scene.start(\"preload-scene\");\r\n    }\r\n}","import { Boom } from \"../prefabs/boom\";\r\nimport { Bullet } from \"../prefabs/bullet\";\r\nimport { Dragon } from \"../prefabs/dragon\";\r\nimport { Enemies } from \"../prefabs/enemies\";\r\nimport { Enemy } from \"../prefabs/enemy\";\r\nimport { Fire } from \"../prefabs/fire\";\r\nimport { BrowserResolution, Sounds, DragonStartPosition, FlyingType } from \"../utils\";\r\n\r\nexport class GameScene extends Phaser.Scene {\r\n    private _dragon: Dragon;\r\n    private _enemies: Enemies;\r\n    private _bg: Phaser.GameObjects.TileSprite;\r\n    private _score: number = 0;\r\n    private _scoreText: Phaser.GameObjects.Text | null;\r\n    private _sounds: Sounds | null;\r\n    public cursors: Phaser.Types.Input.Keyboard.CursorKeys;\r\n\r\n    constructor() {\r\n        super({ key: \"game-scene\" });\r\n    }\r\n\r\n    protected init() {\r\n        this.cursors = this.input.keyboard.createCursorKeys();\r\n        this._score = 0;\r\n    }\r\n\r\n    protected create() {\r\n        this.createBackground();\r\n        if (!this._sounds) this.createSounds();\r\n        // hold in object \"cursors\" boardkeys - left, right, up, down, space, shift\r\n        this._dragon = new Dragon(this, DragonStartPosition, FlyingType[0], this.cursors); // pass these cursors to dragon for control of it\r\n        this._enemies = new Enemies(this.physics.world, this);\r\n        this.createCompleteEvents();\r\n        this.addOverlap();\r\n        this.showScore();\r\n    }\r\n\r\n    private createCompleteEvents(): void {\r\n        this._dragon.once(\"object_killed\", this.onComplete, this);\r\n        this.events.once(\"enemies_killed\", this.onComplete, this);\r\n    }\r\n\r\n    private onComplete(): void {\r\n        this.scene.start(\"start-scene\", {\r\n            continue_game: true,\r\n            score: this._score,\r\n            user_wins: this._dragon.active\r\n        });\r\n        // this._score = 0;\r\n    }\r\n\r\n    private addOverlap(): void {\r\n        this.physics.add.overlap(this._dragon?.fires, this._enemies, this.onOverlapFiresEnemies, undefined, this);\r\n        this.physics.add.overlap(this._enemies.bullets, this._dragon, this.onOverlapBulletsDragon, undefined, this);\r\n        this.physics.add.overlap(this._dragon, this._enemies, this.onOverlapDragonEnemies, undefined, this);\r\n    }\r\n\r\n    private onOverlapFiresEnemies(fire: Fire, enemy: Enemy): void {\r\n        ++this._score;\r\n        this._scoreText?.setText(`Score: ${this._score}`);\r\n        Boom.generateBoom(this, enemy);\r\n        this._sounds?.boom.play();\r\n        fire.setAlive(false);\r\n        enemy.setAlive(false);\r\n    }\r\n\r\n    private onOverlapBulletsDragon(bullet: Bullet, dragon: Dragon): void {\r\n        bullet.setAlive(false);\r\n        dragon.setAlive(false);\r\n    }\r\n\r\n    private onOverlapDragonEnemies(dragon: Dragon, enemy: Enemy): void {\r\n        Boom.generateBoom(this, enemy);\r\n        this._sounds?.boom.play();\r\n        dragon.setAlive(false);\r\n        enemy.setAlive(false);\r\n    }\r\n\r\n    private createBackground(): void {\r\n        this._bg = this.add.tileSprite(0, 0, BrowserResolution.WIDTH, BrowserResolution.HEIGHT,\"bg\").setOrigin(0, 0);\r\n    }\r\n\r\n    private createSounds(): void {\r\n        this._sounds = {\r\n            theme: this.sound.add(\"theme\", { volume: 0.4, loop: true }),\r\n            boom: this.sound.add(\"boom\", {volume: 0.3})\r\n        };\r\n        this._sounds.theme.play();\r\n    }\r\n\r\n    // this method is executed every millisecond\r\n    public update() {\r\n        this._dragon?.move();\r\n        if (this._bg) this._bg.tilePositionX += 2; // make the background to move\r\n    }\r\n\r\n    private showScore(): void {\r\n        this._scoreText = this.add.text(\r\n            30, 30, `Score: ${this._score}`,\r\n            { fontFamily: \"CurseCasual\", fontSize: \"40px\", color: \"#E62B0D\", stroke: \"#000000\", strokeThickness: 1, }\r\n        );\r\n    }\r\n}","import { LoadingBar } from \"../utils\";\r\n\r\nexport class PreloadScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({key: \"preload-scene\"});\r\n    }\r\n\r\n    protected preload() {\r\n        this.add.sprite(0, 0, \"bg\").setOrigin(0, 0);\r\n        const loadingBar: LoadingBar = new LoadingBar(this);\r\n        this.preloadAssets();\r\n    }\r\n\r\n    protected preloadAssets() {\r\n        this.load.atlas(\"dragon\", \"assets/images/dragon.png\", \"assets/images/dragon.json\");\r\n        this.load.atlas(\"enemy\", \"assets/images/enemy.png\", \"assets/images/enemy.json\");\r\n        this.load.atlas(\"boom\", \"assets/images/boom.png\", \"assets/images/boom.json\");\r\n        this.load.image(\"fire\", \"assets/images/fire.png\");\r\n        this.load.image(\"bullet\", \"assets/images/bullet.png\");\r\n\r\n        this.load.audio(\"theme\", \"assets/sounds/theme.mp3\");\r\n        this.load.audio(\"boom\", \"assets/sounds/boom.mp3\");\r\n    }\r\n\r\n    protected create() {\r\n        this.scene.start(\"start-scene\");\r\n    }\r\n}","import { BrowserResolution, StartData } from \"../utils\";\r\n\r\nexport class StartScene extends Phaser.Scene {\r\n\r\n    constructor() {\r\n        super({key: \"start-scene\"});\r\n    }\r\n\r\n    protected create(data: StartData): void {\r\n        this.createBackground();\r\n        if (data.continue_game) this.showPopup(data);\r\n        this.createText();\r\n    }\r\n\r\n    private createBackground(): void {\r\n        this.add.sprite(0, 0, \"bg\").setOrigin(0, 0);\r\n    }\r\n\r\n    private createText(): void {\r\n        const tapText: Phaser.GameObjects.Text = this.add.text(\r\n            BrowserResolution.WIDTH / 2,\r\n            BrowserResolution.HEIGHT / 2 + 150,\r\n            \"Tap to start\",\r\n            { fontFamily: \"CurseCasual\", fontSize: \"60px\", color: \"#E62B0D\", stroke: \"#000000\", strokeThickness: 3, }\r\n        ).setOrigin(0.5);\r\n        tapText.setInteractive({useHandCursor: true}); // make text clickable and with cursor on hover\r\n        tapText.on(\"pointerdown\", () => this.showGameScene());\r\n    }\r\n\r\n    private showGameScene(): void {\r\n        this.scene.start(\"game-scene\");\r\n    }\r\n\r\n    private showPopup(data: StartData): void {\r\n        this.add.graphics()\r\n            .fillStyle(0x000000, 0.5)\r\n            .fillRoundedRect(BrowserResolution.WIDTH / 2 - 210, BrowserResolution.HEIGHT / 2 - 200, 420, 300, 16);\r\n        const textTitle: string = data.user_wins ? \"Level completed!\" : \"Game over!\";\r\n        let textScore: string = \"\";\r\n        textScore = data.score > 1 ? `${data.score} enemies` : `${data.score} enemy`;\r\n        textScore = \"You`ve killed \" + textScore;\r\n        this.add.text(\r\n            BrowserResolution.WIDTH / 2,\r\n            BrowserResolution.HEIGHT / 2 - 100,\r\n            textTitle,\r\n            { fontFamily: \"CurseCasual\", fontSize: \"55px\", color: \"#E62B0D\", stroke: \"#000000\", strokeThickness: 3, }).setOrigin(0.5);\r\n        this.add.text(\r\n            BrowserResolution.WIDTH / 2,\r\n            BrowserResolution.HEIGHT / 2,\r\n            textScore,\r\n            { fontFamily: \"CurseCasual\", fontSize: \"40px\", color: \"#E62B0D\", stroke: \"#000000\", strokeThickness: 3, }).setOrigin(0.5);\r\n    }\r\n}","export enum BrowserResolution {\r\n    WIDTH = 1536,\r\n    HEIGHT = 726\r\n};\r\n\r\nexport const DragonStartPosition = {\r\n    x: 150,\r\n    y: BrowserResolution.HEIGHT / 2\r\n};\r\n\r\nexport type StartPosition = {\r\n    x: number,\r\n    y: number\r\n};\r\n\r\nexport type Sounds = {\r\n    theme: Phaser.Sound.BaseSound,\r\n    boom: Phaser.Sound.BaseSound\r\n};\r\n\r\nexport type StartData = {\r\n    continue_game: boolean,\r\n    score: number,\r\n    user_wins: boolean\r\n};\r\n\r\nexport const FlyingType = {\r\n    0: \"dragon1\",\r\n    1: \"enemy1\",\r\n    2: \"enemy2\",\r\n    3: \"enemy3\",\r\n    4: \"enemy4\",\r\n};\r\n\r\nexport const DRAGON_SPEED: number = 500;\r\nexport const ENEMY_SPEED: number = 250;\r\nexport const ENEMIES_AMOUNT: number = 10;\r\n\r\nexport class LoadingBar {\r\n    private scene: Phaser.Scene;\r\n    private style: any;\r\n    private progressBox: Phaser.GameObjects.Graphics;\r\n    private progressBar: Phaser.GameObjects.Graphics;\r\n\r\n    constructor(scene: Phaser.Scene) {\r\n        this.scene = scene;\r\n        this.style = {\r\n            boxColor: 0xD3D3D3,\r\n            barColor: 0xFFF8DC,\r\n            x: BrowserResolution.WIDTH / 2 - 450,\r\n            y: BrowserResolution.HEIGHT / 2 + 250,\r\n            width: 900,\r\n            height: 25\r\n        };\r\n        this.progressBox = new Phaser.GameObjects.Graphics(this.scene);\r\n        this.progressBox = this.scene.add.graphics();\r\n        this.progressBar = this.scene.add.graphics();\r\n\r\n        this.showProgressBox();\r\n        this.setEvents();\r\n    }\r\n\r\n    setEvents() {\r\n        this.scene.load.on(\"progress\", this.showProgressBar, this);\r\n        this.scene.load.on(\"complete\", this.onLoadComplete, this);\r\n    }\r\n\r\n    showProgressBox() {\r\n        this.progressBox\r\n            .fillStyle(this.style.boxColor) // grey color\r\n            .fillRect(this.style.x, this.style.y, this.style.width, this.style.height);\r\n    }\r\n\r\n    showProgressBar(value: number) {\r\n        this.progressBar\r\n            .clear()\r\n            .fillStyle(this.style.barColor) // yellow color\r\n            .fillRect(this.style.x, this.style.y, this.style.width * value, this.style.height);\r\n    }\r\n\r\n    onLoadComplete() {\r\n        this.progressBox.destroy();\r\n        this.progressBar.destroy();\r\n    }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n"],"sourceRoot":""}